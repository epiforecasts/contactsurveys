---
output: github_document
---

# contactsurveys

<!-- badges: start -->
[![R-CMD-check](https://github.com/epiforecasts/contactsurveys/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/epiforecasts/contactsurveys/actions/workflows/R-CMD-check.yaml)
[![Codecov test
coverage](https://codecov.io/gh/epiforecasts/contactsurveys/graph/badge.svg)](https://app.codecov.io/gh/epiforecasts/contactsurveys)
<!-- badges: end -->

`contactsurveys` is an `R` package to download contact survey data, which can be used to derive social mixing matrices (see, for example, the [socialmixr](https://github.com/epiforecasts/socialmixr) package). This code was initially in the socialmixr package, but the code for downloading surveys has been moved into this package.

# Installation

The development version can be installed using `remotes`

```r
remotes::install_github("epiforecasts/contactsurveys")
```

# Example usage

```{r setup, include = FALSE}
library(contactsurveys)
```

`contactsurveys` provides access to all surveys in the [Social contact data](https://zenodo.org/communities/social_contact_data) community on [Zenodo](https://zenodo.org). 

## Listing surveys

The available surveys can be listed (if an internet connection is available) with `list_surveys()`

```{r}
social_contact_surveys <- list_surveys()
dim(social_contact_surveys)
head(social_contact_surveys)
```

By default, the survey data from `list_surveys()` is effectively cached, so it will run very quickly the next time you run it. See `?list_surveys()` for more detail.

## Downloading surveys

Surveys can be downloaded using `download_survey()`. This will get the relevant data of a survey given its Zenodo DOI (as returned by `list_surveys()`). 

```{r}
polymod_doi <- "https://doi.org/10.5281/zenodo.3874557"
polymod_survey_files <- download_survey(polymod_doi)
polymod_survey_files
```

## Getting citations

A reference for any given survey can be obtained by passing a DOI to `get_citation()`:

```{r}
get_citation(polymod_doi)
```

## Using contact matrices with socialmixr

You can then use the survey files downloaded with functions from [socialmixr](https://github.com/epiforecasts/socialmixr), `load_survey()` and `contact_matrix()`.

```{r}
library(socialmixr)
polymod_loaded <- load_survey(polymod_survey_files)
uk_contact_matrix <- contact_matrix(
      polymod_loaded,
      countries = "United Kingdom",
      age.limits = c(0, 18, 65)
    )

uk_contact_matrix
```

## Contributors

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->

All contributions to this project are gratefully acknowledged using the [`allcontributors` package](https://github.com/ropensci/allcontributors) following the [allcontributors](https://allcontributors.org) specification. Contributions of any kind are welcome!

### Code


<a href="https://github.com/epiforecasts/contactsurveys/commits?author=sbfnk">sbfnk</a>, 
<a href="https://github.com/epiforecasts/contactsurveys/commits?author=Bisaloo">Bisaloo</a>, 
<a href="https://github.com/epiforecasts/contactsurveys/commits?author=njtierney">njtierney</a>, 
<a href="https://github.com/epiforecasts/contactsurveys/commits?author=lwillem">lwillem</a>, 
<a href="https://github.com/epiforecasts/contactsurveys/commits?author=Degoot-AM">Degoot-AM</a>, 
<a href="https://github.com/epiforecasts/contactsurveys/commits?author=jarvisc1">jarvisc1</a>, 
<a href="https://github.com/epiforecasts/contactsurveys/commits?author=alxsrobert">alxsrobert</a>



### Issues


<a href="https://github.com/epiforecasts/contactsurveys/issues?q=is%3Aissue+author%3Aavallecam">avallecam</a>


<!-- markdownlint-enable -->
<!-- prettier-ignore-end -->
<!-- ALL-CONTRIBUTORS-LIST:END -->





